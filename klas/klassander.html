<!DOCTYPE html>
<html lang="nl">
    <head>
        <link rel="stylesheet" type="text/css" href="/klassander/css/style.css">
        <title>klas sander 11 items</title>
        <script type="module">
        import zim from "https://zimjs.org/cdn/017/zim_pizzazz";
new Frame(FIT, 1280, 720, white, black, ready);
function ready() {
 
   var speech = new Speech();
  
  F.color=white;

  F.loadAssets(["gf_Roboto", "gf_Chewy"]);
  F.on("complete",()=>{
    STYLE = {font:"Roboto"}
    

  
  var picBottom =  new Pic("https://raw.githubusercontent.com/karelrosseel/meestersander/master/klas/klasbg/onderlaag-metinstructieboek.png",1280,720).siz(1370).pos(40,0,CENTER,BOTTOM).alp(.3);
    
   
    new Pic("https://raw.githubusercontent.com/karelrosseel/meestersander/master/klas/klasbg/overlay-klas-11transitems-vloergrijs.png",1280,720).siz(1370).pos(40,0,CENTER,BOTTOM) 
    
  const afBtn =   new Button(70,50,"AF",black,black,black,white,white,white).sca(.7).pos(75,25,RIGHT,TOP).tap(()=>{
    afBtn.alp(0);
    uitBtn.alp(1);
       picBottom.alp(1);
       S.update()
     })
    
  const uitBtn =   new Button(70,50,"X",black,black,black,white,white,white).sca(.7).pos(75,25,RIGHT,TOP).alp(0).tap(()=>{
    afBtn.alp(1);
    uitBtn.alp(0);
       picBottom.alp(.2);
       S.update()
     })

    const textLabel = new Label({text:"In de klas zijn veel elektronische\napparaten. Met een stroomkabel\nof batterijen. Kan jij ze vinden?", font:"Chewy", size:20, color:white}).pos(360,10,LEFT,TOP).tap(()=>{speech.talk("textLabel")});
    
    
    
const listbox =  new Rectangle({width:1250, height:120, color:blue, borderColor:white, borderWidth:3, corner:20}).pos(20,5,LEFT,BOTTOM).alp(.7);
 /////
    
    const oBtn = new Button(200,50,"toon kleur", blue).sca(.5).pos(10,100,RIGHT,TOP).tap(()=>{listbox.alp(.8); xBtn.alp(1); oBtn.alp(0); S.update()})
  const xBtn =  new Button(200,50,"geen kleur",blue).sca(.5).pos(10,100,RIGHT,TOP).tap(()=>{listbox.alp(0); oBtn.alp(1); xBtn.alp(0); S.update()})
  
  
  ////////////////:
     const tBtn = new Button(200,50,"toon tekst", white,white,white,black,black,black).sca(.5).pos(10,70,RIGHT,TOP).alp(0).tap(()=>{
      kleinerobotBtn.alp(1);
      paneelBtn.alp(1);
      robotBtn.alp(1);
      tabletrekenappBtn.alp(1);
    koptelefoonBtn.alp(1);
    wereldbolBtn.alp(1);
    beebotBtn.alp(1);
    computerschermBtn.alp(1);
    instructieboekBtn.alp(1);
    touchscreenBtn.alp(1);
    boekjeBtn.alp(1);
       
      ///////
       xtBtn.alp(1);tBtn.alp(0); S.update()})
  const xtBtn =  new Button(200,50,"geen tekst",white,white,white,black,black,black).sca(.5).pos(10,70,RIGHT,TOP).tap(()=>{
      kleinerobotBtn.alp(0);
      paneelBtn.alp(0);
      robotBtn.alp(0);
    tabletrekenappBtn.alp(0);
    koptelefoonBtn.alp(0);
    wereldbolBtn.alp(0);
    beebotBtn.alp(0);
    computerschermBtn.alp(0);
    instructieboekBtn.alp(0);
    touchscreenBtn.alp(0);
    boekjeBtn.alp(0);
    
   
     
    ////
      tBtn.alp(1); xtBtn.alp(0); S.update()})
  
  
  ///////////////////////////////////////
STYLE = {button:{shadowColor:clear}}
const titleBtn =  new Button(AUTO,70,"klik en luister, zoek en plaats object").sca(.5).pos(5,5,LEFT,TOP).tap(()=>{window.location.reload("Refresh")});
  STYLE={shadowColor:clear}
  new Button(AUTO,50,"schud objecten door elkaar",blue,blue,blue).sca(.6)
      .pos(30,40,LEFT,TOP)
      .tap(()=>{
          replayShuffle();
          //opnieuwSchuddenBtn.removeFrom();
          S.update()
      });  
    
  makeIcon("sound",white,1).pos(320, 10,LEFT,TOP).tap(()=>{speech.talk("klik en luister, zoek en plaats object, In de klas zijn veel elektronische\napparaten. Met een stroomkabel\nof batterijen. Kan jij ze vinden?" )})


	// we could use the type property of shape to do matching
	// but often, with matching there needs to be a unique
	// so we show how we can do that with a match property

	STYLE = {
		color:faint,
		borderColor:dark,
		borderWidth:3,
		centerReg:{add:false},
		clone:false // important to keep custom match property when making Tile
	}

	// these are what we drag
	var objectsList = [ //much items be as pictures
		new Rectangle(120,100,clear,clear).expand(0), // 1 kleine robot cubetto
		new Rectangle(120,100,clear,clear).expand(0), // 2 paneel cubetto
		new Rectangle(120,100,clear,clear).expand(0), // 3 grote robot
    new Rectangle(100,100,clear,clear).expand(0), // 4 camera
    new Rectangle(120,100,clear,clear).expand(0), //  5 deurbel
    new Rectangle(100,100,clear,clear).expand(0), // 6 koelkast scherm
    new Rectangle(120,100,clear,clear).expand(0), /// 7 laptop 
    new Rectangle(120,100,clear,clear).expand(0), /// 8 stofzuiger
    new Rectangle(100,100,clear,clear).expand(0), // 9 horloge
    new Rectangle(120,100,clear,clear).expand(0), /// 10 horloge
    new Rectangle(120,100,clear,clear).expand(0) /// 10 speaker
	];
	
 PATH = "https://raw.githubusercontent.com/karelrosseel/meestersander/master/klas/items/";
    
    
const robotbox = new Pic("robotbox.png").sca(1.2).cur().center(objectsList[0]).sha();
const kleinerobotBtn = new Button({width:AUTO, height:AUTO, label:"kleine robot\ncubetto", color:black,bgColor:white}).sca(.4).pos(0,-30,CENTER,BOTTOM,objectsList[0]);
    
const paneel = new Pic("robotbox-paneel.png").siz(125).cur().center(objectsList[1]).sha();
const paneelBtn = new Button({width:AUTO, height:AUTO, label:"paneel\nvoor cubetto", color:black,bgColor:white}).sca(.4).pos(0,-30,CENTER,BOTTOM,objectsList[1]);   
    
const robot = new Pic("robot.png").siz(50).cur().center(objectsList[2]).sha();
const robotBtn = new Button({width:AUTO, height:AUTO, label:"grote robot", color:black,bgColor:white}).sca(.4).pos(0,-30,CENTER,BOTTOM,objectsList[2]);
    
const boekje = new Pic("boekje.png").sca(.8).cur().center(objectsList[3]).mov(0,-30).sha();
const boekjeBtn = new Button({width:AUTO, height:AUTO, label:"Boekje Tikke\nTakke\nToetsenbord", color:black,bgColor:white}).sca(.4).pos(0,-20,CENTER,BOTTOM,objectsList[3]);
  
const touchscreen = new Pic("screentouch.png").sca(1).cur().center(objectsList[4]).sha();
const touchscreenBtn = new Button({width:AUTO, height:AUTO, label:"touchscreen\ngroot scherm", color:black,bgColor:white}).sca(.4).pos(0,-20,CENTER,BOTTOM,objectsList[4]);
    
const computerscherm = new Pic("screen.png").sca(.9).rot(-2).cur().center(objectsList[5]).sha();
const computerschermBtn = new Button({width:AUTO, height:AUTO, label:"computerscherm", color:black,bgColor:white}).sca(.4).pos(0,-20,CENTER,BOTTOM,objectsList[5]);
    
     const instructieboek = new Pic("instructieboek-klein.png").sca(.7).cur().center(objectsList[6]).sha();
const instructieboekBtn = new Button({width:AUTO, height:AUTO, label:"instructieboek\nMeester Sander", color:black,bgColor:white}).sca(.4).pos(0,-20,CENTER,BOTTOM,objectsList[6]);
    
      const wereldbol = new Pic("wereldbol.png").sca(.8).cur().center(objectsList[7]).mov(0,-10).sha();
const wereldbolBtn = new Button({width:AUTO, height:AUTO, label:"elektrische\nwereldbol", color:black,bgColor:white}).sca(.4).pos(0,-20,CENTER,BOTTOM,objectsList[7]);
    
      const tabletrekenapp = new Pic("rekenapp.png").sca(.8).cur().center(objectsList[8]).sha();
const tabletrekenappBtn = new Button({width:AUTO, height:AUTO, label:"tablet met\nrekenapp", color:black,bgColor:white}).sca(.4).pos(0,-20,CENTER,BOTTOM,objectsList[8]);
    
      const koptelefoon = new Pic("koptelefoon.png").sca(.8).cur().center(objectsList[9]).sha();
 const koptelefoonBtn = new Button({width:AUTO, height:AUTO, label:"draadloze\nkoptelefoon", color:black,bgColor:white}).sca(.4).pos(0,-20,CENTER,BOTTOM,objectsList[9]);
 
    
    
      const beebot = new Pic("beebot.png").sca(.8).cur().center(objectsList[10]).sha();
const beebotBtn = new Button({width:AUTO, height:AUTO, label:"beebot met\nbatterijen", color:black,bgColor:white}).sca(.4).pos(0,-20,CENTER,BOTTOM,objectsList[10]);
    
    
    
	// these are what we drag to
	STYLE = {
		color:pink,
		borderColor:dark,
		borderWidth:3,
		clone:false // important to keep custom match property when making Tile
	}
	
	// add targets to a Container
	var targets = new Container(W, H).pos(0,0,CENTER,CENTER);
	
	// var targetsList = [
	// 	new Rectangle().centerReg(targets).loc(200, 200),
	// 	new Circle().centerReg(targets).loc(800, 200),
	// 	new Triangle(110,110,110).centerReg(targets).loc(200, 400)
	// ];
	
    //new Grid();
	var targetsList = [
    
    // 1
		new Rectangle({width:60,height:60,color:clear, borderColor:clear, dashed:true}).centerReg(targets).loc(100, 540).expand(0).cur(), // kleine robot cubetto
    // 2
		new Rectangle({width:100,height:100,color:clear, borderColor:clear, dashed:true}).centerReg(targets).loc(105, 610).expand(0).cur(), // paneel kleine robot
    // 3
		new Rectangle({width:130,height:245,color:clear, borderColor:clear, dashed:true}).centerReg(targets).loc(1150, 465).expand(0).cur(), // grote robot 
     // 4
    	new Rectangle({width:80,height:110,color:clear, borderColor:clear, dashed:true}).centerReg(targets).loc(750, 295).expand(0).cur(), // boek Tikke Takke
     // 5
		new Rectangle({width:250,height:170,color:clear, borderColor:clear, dashed:true}).centerReg(targets).loc(990, 210).expand(0).cur(), // touchscreen groot
     // 6
		new Rectangle({width:120,height:100,color:clear, borderColor:clear, dashed:true}).centerReg(targets).loc(540, 260).expand(0).cur(), // computer scherm
     
     // 7
    	new Rectangle({width:100, height:70, color:clear, borderColor:clear, dashed:true}).centerReg(targets).loc(195, 435).expand(0).cur(), // instructieboek
     // 8
    	new Rectangle({width:80, height:100, color:clear, borderColor:clear, dashed:true}).centerReg(targets).loc(100, 300).expand(0).cur() ,// wereldbol
    // 9
    	new Rectangle({width:60, height:70, color:clear, borderColor:clear, dashed:true}).centerReg(targets).loc(470, 500).expand(0).cur(), // rekenapp
    // 10  speaker
    	new Rectangle({width:50, height:70, color:clear, borderColor:clear, dashed:true}).centerReg(targets).loc(310, 280).expand(0).cur(), // koptelefoon
    
    	new Rectangle({width:60,height:80,color:clear, borderColor:clear, dashed:true}).centerReg(targets).loc(860, 600).expand(0).cur(), // beebot 
	];
   
	//targetsList[1].tap(()=>{new Aud(bootaudio).play()})
	////////////////////////////////////////
  targetsList[0].sound = "kleine robot cubetto";
	targetsList[1].sound = "paneel voor cubetto"; //
	targetsList[2].sound = "grote robot\nbatterijen"; //
	targetsList[3].sound = "boek Tikke Takke Toetsenbord"; //
	targetsList[4].sound = "touchscreen groot"; //
	targetsList[5].sound = "computerscherm"; //
	targetsList[6].sound = "instructieboek"; //
	targetsList[7].sound = "elektrische wereldbol"; //
	targetsList[8].sound = "tablet met rekenapp"; //
	targetsList[9].sound = "koptelefoon"; //
  targetsList[10].sound = "beebot met batterijen"; //
    
    /////////////////////
 
	// targets.cur().on("mousedown", e=>{
	// 	//e.target.sound.play({loop:false, loopCount:0});
	// speech.talk(e.target.sound) })
	// });
    
    targets.loop((target)=> {
      target.on("pressdown", ()=>{
        speech.talk(target.sound) 
        })
     });
	
	// set up the match
	loop(objectsList,  (obj, i)=> {
		obj.match = targets.getChildAt(i);
    obj.sca(.8);
	});
	
 
  objectsList[0].sound = "kleine robot cubetto";
	objectsList[1].sound = "paneel voor cubetto"; //
	objectsList[2].sound = "grote robot"; //
	objectsList[3].sound = "boek Tikke Takke Toetsenbord"; //
	objectsList[4].sound = "touchscreen groot"; //
	objectsList[5].sound = "computerscherm"; //
	objectsList[6].sound = "instructieboek"; //
	objectsList[7].sound = "eleektrische wereldbol"; //
	objectsList[8].sound = "tablet met rekenapp"; //
	objectsList[9].sound = "koptelefoon"; //
  objectsList[10].sound = "beebot\nmet batterijen"; //

  

  
	// randomize position using shuffle 
	//var objects = new Tile(series(shuffle(objectsList)), 11, 1, 20)
    /// in this exercices we do NOT want to shuffle because we need to enlarge some objects into the picture !!! and that is not possible when an array is shuffled, we don't know which item need to enlarge !
    var objects = new Tile(series(objectsList), 11, 1, 20)
	.drag()
	.pos(0,30,CENTER,BOTTOM);


///////////////////////////////////////////
    
 
    
    
  //   /// here all object will become some size
    objects.loop((item)=> {
      item.on("pressdown", ()=>{ // so it works also when dragging picture
   // item.sound.play({loop:false, loopCount:0}) })
    speech.talk(item.sound);
    //F.off(item.sca(1));
  	item.sca(1.4); // 1.2
      })
     });
  
	// objects.items.on("mousedown", e=>{
	// 	e.target.sound.play({loop:true, loopCount:2});
	// });
	
	
	STYLE = {};

	// Record start locations to snap back to
	objects.loop(obj=> {
		obj.startX = obj.x;
		obj.startY = obj.y;
	})
	
	// Create the shape where we draw the line
	var shape = new Shape().addTo().ord(-1);

	// Record which shape has been picked up
	// This gets used in the Ticker
	var currentShape;
	objects.on("mousedown",  e=> {
		currentShape = e.target;
	});
    
    
	 
      
    
	objects.on("pressup",  e=> {

		// Test to see if object is hitting target
     //currentShape = e.target.sca(2.6);
   // objects[1] = e.target.sca(2.6);
    	
     
		var obj = e.target;
  
     if ( objects.items[0].hitTestBounds(obj.match)) {
      objects.items[0].sca(1);     
      S.update()}
    
     if ( objects.items[1].hitTestBounds(obj.match)) {
      objects.items[1].sca(1);     
      S.update()}
    
    
     if ( objects.items[2].hitTestBounds(obj.match)) {
       robotBtn.sca(.2).mov(0,-10)
      objects.items[2].sca(2.7);
       
       S.update()}
    
    if ( objects.items[4].hitTestBounds(obj.match)) {
       touchscreenBtn.sca(.3)
      objects.items[4].sca(2);
      new Pic("handvoortouchscreen.png").pos(850,190,LEFT,TOP);
      S.update()}
    
    
    // all other objects get the same scale
    
		if (obj.hitTestBounds(obj.match)) { // if match
speech.talk("goed gevonden");
			obj.loc(obj.match).noMouse(); // don't let user pick up object
			obj.match.removeFrom();
			emitter.loc(obj).spurt(10);
			//shape.c();
			currentShape = null;
      /// next step is disabled because we want each object to have own scale or size, because some items are bigger than the others
    // obj.sca(1.2); // not 1.4 
      
      
// if (obj[1].hitTestBounds(targets[1].match)) {
//   objects[1].sca(2);
//   S.update()
// }
      
//       obj.on("pressup", ()=>{ 
      // obj.siz(null,100);
//       })
   
      
    
      
			if (targets.numChildren==0) { // end game
				objects.animate({
					props:{scale:1.4},
					time:.2,
					rewind:true,
					loop:true, // was true before
					loopCount:1, // was 2 before
					sequence:100
				});
				
        endPane();
     
        speech.talk("Alles op de correcte plaats, dat heb je goed gedaan!")
			// new Aud("dathebjegoedgedaan.mp3").play({wait:1});
			}

		} else { // snap back - no match

			objects.noMouse();
			obj.animate({
				props:{x:obj.startX, y:obj.startY},
				time:.5,
				ease:"elasticOut",
				call:function () {
					objects.mouse();
					currentShape = null;
				}
			});

		}
	});

	var emitter = new Emitter({obj:new Circle(20,[pink,purple],dark), startPaused:true});

    function endPane(){
      listbox.alp(0);
	var replayPane = new Pane({
		content: "Goed gedaan,\nBlij dat je de toestellen kent.\nSpeel je nog eens, klik de knop opnieuw!",
		backgroundColor:white,
		rollBackgroundColor:pink,
		//corner:0,
		width: 1000,
    height:400,
    displayClose:false,
    backdropColor:clear,
    backgroundColor:white.toAlpha(.8)
	}).show();
    new Emoji("\ud83d\udc4d",100).pos(0,20,CENTER,TOP,replayPane).noMouse();
new Button(AUTO,AUTO,"OPNIEUW","green","green","green").pos(10,10,CENTER,BOTTOM,replayPane).tap(()=>{replayPane.hide();                                                       replayShuffle();                                                            S.update()                                                       });
      
  new Button(AUTO,AUTO,"RESULAAT").pos(10,10,LEFT,BOTTOM,replayPane)
  .tap(()=>{
      listbox.alp(0);
    replayPane.hide();                                                              // add button to the stage
      const opnieuwSchuddenBtn = new Button(AUTO,AUTO,"START OPNIEUW","green","green","green")
      .pos(100,100,LEFT,TOP)
      .tap(()=>{
          listbox.alp(.8);
          
          replayShuffle();
          opnieuwSchuddenBtn.removeFrom();
          S.update()
      });  
  })
     
    } // end  of function endPane
    
		//replayPane.show(()=> {
      
      function replayShuffle(){   
			
        //replay.removeFrom();

			// restarting is always tricky
			// you could just use zgo("matchingGame.html")
     
			objects.loop(obj=> {
				obj.animate({
					props:{x:obj.startX, y:obj.startY},
					time:.7,
					ease:"backOut",
					call:function () {
						objects.animate({
							props:{alpha:0},
							time:1,
							rewind:true,
							rewindCall:function() {
								// get the last starts
								var starts = [];
								objects.loop(obj=> {
									starts.push(obj.startX);
								});
								// shuffle them
								shuffle(starts);
								// loop through the objects to drag and apply new starts
								loop(starts, (s, i)=> {
									objects.getChildAt(i).startX = objects.getChildAt(i).x = s;
								});
							}
						})
            obj.sca(.8);
						obj.mouse(); // add mouse control back
					}
				});
			});			
			loop(targetsList, target=>{
				target.addTo(targets);
			})
	//	});

  } // end of function replayshuffle
    
   

    const shell = new Container(W,H).addTo();
			var fullscreen = new Button({
		    width:40,
		    height:40,
		    corner:0,
		    backgroundColor:clear,
		    rollBackgroundColor:blue,
		    icon:makeIcon("maximize", dark),
		    toggleIcon:makeIcon("close", dark)
		}).expand(10)
					.addTo(shell)
					.pos(20,20,RIGHT,TOP);
			
				fullscreen.on("click", ()=>{	
					F.fullscreen(!F.isFullscreen);	
					fullscreen.text = F.isFullscreen?"":"";
				});
				F.on("fullscreenexit", ()=>{
					fullscreen.text = "";
					
        });
 
  // F.madeWith({text:"ZIMjs KIDS"}).pos(10,150,RIGHT, BOTTOM).tap(()=>{zgo("https://zimjs.org/slate/view", "_blank")});
    
   
  }) // end of F complete
}
       </script>
    </head>
    <body>
       
    </body>
</html>